#!/bin/sh

# mkdir then cd
mkcd() {
	mkdir -p "$@"
	cd "$@" || exit
}

# Use fd (https://github.com/sharkdp/fd) instead of the fzf's default
# command for listing path candidates.
_fzf_compgen_path() {
	$FZF_DEFAULT_COMMAND . "$1"
}

# Use fd to generate the list for directory completion
_fzf_compgen_dir() {
	$FZF_ALT_C_COMMAND . "$1"
}

# Lazily load nvm for a faster shell startup.
#
# Inspired by: http://broken-by.me/lazy-load-nvm/
_load_nvm() {
	[[ -z "$NVM_DIR" ]] && export NVM_DIR="$HOME/.nvm"
	[ -s "$NVM_DIR/nvm.sh" ] && . "$NVM_DIR/nvm.sh"
}

nvm() {
	unset -f nvm &>/dev/null
	_load_nvm && nvm "$@"
}

node() {
	unset -f node &>/dev/null
	_load_nvm && node "$@"
}

npm() {
	unset -f npm &>/dev/null
	_load_nvm && npm "$@"
}

npx() {
	unset -f npm &>/dev/null
	_load_nvm && npm "$@"
}

yarn() {
	unset -f yarn &>/dev/null
	_load_nvm && yarn "$@"
}
